<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FrostBite Arena - 网页版</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <!-- 主菜单 -->
    <div id="main-menu" class="menu-screen">
        <div class="menu-container">
            <div class="title-container">
                <h1 class="game-title">FROSTBITE</h1>
                <h2 class="game-subtitle">ARENA</h2>
            </div>
            <div class="menu-buttons">
                <button id="btn-play" class="menu-btn primary">单人模式</button>
                <button id="btn-multiplayer" class="menu-btn primary">多人对战</button>
                <button id="btn-practice" class="menu-btn">练习模式</button>
                <button id="btn-settings" class="menu-btn">设置</button>
            </div>
            <div class="controls-hint">
                <p>WASD 移动 | 鼠标 瞄准 | 左键 射击 | R 换弹 | 空格 跳跃 | B 购买</p>
            </div>
        </div>
        <div class="ice-particles"></div>
    </div>

    <!-- 多人模式 - 输入名称 -->
    <div id="name-input-screen" class="menu-screen hidden">
        <div class="settings-container">
            <h2>输入你的名称</h2>
            <div class="setting-item">
                <input type="text" id="player-name-input" class="text-input" placeholder="你的游戏名..." maxlength="20">
            </div>
            <div class="menu-buttons" style="margin-top: 20px;">
                <button id="btn-confirm-name" class="menu-btn primary">确认</button>
                <button id="btn-back-from-name" class="menu-btn">返回</button>
            </div>
        </div>
    </div>

    <!-- 多人模式 - 房间列表 -->
    <div id="room-list-screen" class="menu-screen hidden">
        <div class="room-list-container">
            <h2>房间列表</h2>
            <div class="player-info-bar">
                <span>玩家: <span id="display-player-name">---</span></span>
            </div>
            <div id="room-list" class="room-list">
                <div class="room-list-empty">暂无房间，创建一个吧！</div>
            </div>
            <div class="menu-buttons horizontal">
                <button id="btn-create-room" class="menu-btn primary">创建房间</button>
                <button id="btn-refresh-rooms" class="menu-btn">刷新</button>
                <button id="btn-back-from-rooms" class="menu-btn">返回</button>
            </div>
        </div>
    </div>

    <!-- 多人模式 - 创建房间 -->
    <div id="create-room-screen" class="menu-screen hidden">
        <div class="settings-container">
            <h2>创建房间</h2>
            <div class="setting-item">
                <label>房间名称</label>
                <input type="text" id="room-name-input" class="text-input" placeholder="房间名..." maxlength="30">
            </div>
            <div class="menu-buttons" style="margin-top: 20px;">
                <button id="btn-confirm-create" class="menu-btn primary">创建</button>
                <button id="btn-back-from-create" class="menu-btn">返回</button>
            </div>
        </div>
    </div>

    <!-- 多人模式 - 房间内等待 -->
    <div id="room-lobby-screen" class="menu-screen hidden">
        <div class="room-lobby-container">
            <h2 id="room-lobby-title">房间</h2>
            <div class="teams-display">
                <div class="team-panel blue">
                    <h3>🔵 蓝队</h3>
                    <div id="blue-team-players" class="team-players"></div>
                    <div class="bot-count">机器人: <span id="blue-bot-count">4</span></div>
                    <button id="btn-join-blue" class="menu-btn small">加入蓝队</button>
                </div>
                <div class="vs-divider">VS</div>
                <div class="team-panel red">
                    <h3>🔴 红队</h3>
                    <div id="red-team-players" class="team-players"></div>
                    <div class="bot-count">机器人: <span id="red-bot-count">4</span></div>
                    <button id="btn-join-red" class="menu-btn small">加入红队</button>
                </div>
            </div>
            <div class="menu-buttons" style="margin-top: 20px;">
                <button id="btn-start-game" class="menu-btn primary hidden">开始游戏</button>
                <button id="btn-leave-room" class="menu-btn">离开房间</button>
            </div>
            <div id="waiting-message" class="waiting-text">等待房主开始游戏...</div>
        </div>
    </div>

    <!-- 设置菜单 -->
    <div id="settings-menu" class="menu-screen hidden">
        <div class="settings-container">
            <h2>设置</h2>
            <div class="setting-item">
                <label>鼠标灵敏度</label>
                <input type="range" id="sensitivity" min="0.1" max="3" step="0.1" value="1">
                <span id="sensitivity-value">1.0</span>
            </div>
            <div class="setting-item">
                <label>音效音量</label>
                <input type="range" id="volume" min="0" max="1" step="0.1" value="0.7">
                <span id="volume-value">70%</span>
            </div>
            <div class="setting-item">
                <label>显示FPS</label>
                <input type="checkbox" id="show-fps" checked>
            </div>
            <button id="btn-back" class="menu-btn">返回</button>
        </div>
    </div>

    <!-- 地图选择 -->
    <div id="map-select-screen" class="menu-screen hidden">
        <div class="map-select-container">
            <h2>选择地图</h2>
            <div class="map-select-body">
                <!-- 左侧：地图列表 -->
                <div class="map-select-left">
                    <div id="map-list" class="map-list">
                        <!-- 地图卡片将由JS动态生成 -->
                    </div>
                </div>
                <!-- 右侧：预览 + 设置 -->
                <div class="map-select-right">
                    <!-- 地图预览 -->
                    <div id="map-preview" class="map-preview">
                        <div class="map-preview-placeholder">← 请选择一张地图</div>
                    </div>
                    <!-- 机器人数量设置 -->
                    <div class="bot-config-panel">
                        <h3>机器人数量</h3>
                        <div class="bot-config-row">
                            <div class="bot-config-team blue">
                                <span class="bot-team-icon">🔵</span>
                                <label>蓝队 (队友)</label>
                                <div class="bot-count-control">
                                    <button class="bot-count-btn" data-team="blue" data-dir="-1">−</button>
                                    <input type="number" id="blue-bot-input" class="bot-count-input" value="5" min="0"
                                        max="20">
                                    <button class="bot-count-btn" data-team="blue" data-dir="1">+</button>
                                </div>
                            </div>
                            <div class="bot-config-team red">
                                <span class="bot-team-icon">🔴</span>
                                <label>红队 (敌人)</label>
                                <div class="bot-count-control">
                                    <button class="bot-count-btn" data-team="red" data-dir="-1">−</button>
                                    <input type="number" id="red-bot-input" class="bot-count-input" value="5" min="0"
                                        max="20">
                                    <button class="bot-count-btn" data-team="red" data-dir="1">+</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- 按钮 -->
                    <div class="map-select-actions">
                        <button id="btn-start-map" class="menu-btn primary" disabled>开始游戏</button>
                        <button id="btn-back-from-map" class="menu-btn">返回</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 游戏画面 -->
    <div id="game-container" class="hidden">
        <canvas id="game-canvas"></canvas>

        <!-- HUD -->
        <div id="hud">
            <!-- 准心 -->
            <div id="crosshair">
                <div class="crosshair-line top"></div>
                <div class="crosshair-line bottom"></div>
                <div class="crosshair-line left"></div>
                <div class="crosshair-line right"></div>
                <div class="crosshair-dot"></div>
            </div>

            <!-- 瞄准镜十字线覆盖层 -->
            <div id="scope-overlay" class="scope-overlay">
                <div class="scope-crosshair-h"></div>
                <div class="scope-crosshair-v"></div>
                <div class="scope-center-dot"></div>
            </div>

            <!-- 命中标记 -->
            <div id="hit-marker" class="hidden">
                <div class="hit-line"></div>
                <div class="hit-line"></div>
                <div class="hit-line"></div>
                <div class="hit-line"></div>
            </div>

            <!-- 生命值和护甲 -->
            <div id="health-armor">
                <div class="stat-box health">
                    <span class="stat-icon">❤</span>
                    <span id="health-value">100</span>
                </div>
                <div class="stat-box armor">
                    <span class="stat-icon">🛡</span>
                    <span id="armor-value">0</span>
                </div>
                <div class="stat-box money">
                    <span class="stat-icon">$</span>
                    <span id="money-value">800</span>
                </div>
            </div>

            <!-- 弹药 -->
            <div id="ammo-display">
                <span id="current-ammo">30</span>
                <span class="ammo-separator">/</span>
                <span id="reserve-ammo">90</span>
                <div id="weapon-name">FROSTBITE RIFLE</div>
            </div>

            <!-- 回合信息 -->
            <div id="round-info">
                <div class="team-score blue">
                    <span class="team-label">蓝队</span>
                    <span id="blue-score">0</span>
                </div>
                <div id="timer">1:30</div>
                <div class="team-score red">
                    <span id="red-score">0</span>
                    <span class="team-label">红队</span>
                </div>
            </div>

            <!-- 中心消息 -->
            <div id="center-message" class="hidden"></div>

            <!-- 击杀信息 -->
            <div id="kill-feed"></div>

            <!-- FPS显示 -->
            <div id="fps-display">FPS: 60</div>

            <!-- 换弹提示 -->
            <div id="reload-indicator" class="hidden">
                <div class="reload-bar"></div>
                <span>换弹中...</span>
            </div>
        </div>

        <!-- 暂停菜单 -->
        <div id="pause-menu" class="hidden">
            <div class="pause-container">
                <h2>游戏暂停</h2>
                <button id="btn-resume" class="menu-btn primary">继续游戏</button>
                <button id="btn-quit" class="menu-btn">返回主菜单</button>
            </div>
        </div>

        <!-- 回合结束 -->
        <div id="round-end" class="hidden">
            <h2 id="round-result"></h2>
            <p id="round-stats"></p>
        </div>
    </div>

    <!-- 点击开始提示 -->
    <div id="click-to-start" class="hidden">
        <div class="click-prompt">
            <h2>点击屏幕开始</h2>
            <p>游戏需要锁定鼠标</p>
        </div>
    </div>

    <!-- 加载Three.js -->
    <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
    <!-- Socket.IO客户端 -->
    <script src="https://cdn.socket.io/4.6.0/socket.io.min.js"></script>

    <!-- 游戏脚本 -->
    <script src="js/config.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/weapons.js"></script>
    <script src="js/player.js"></script>
    <script src="js/enemy.js"></script>
    <script src="js/map_configs.js"></script>
    <script src="js/map_preview.js"></script>
    <script src="js/map.js"></script>
    <script src="js/hud.js"></script>
    <script src="js/buy_menu.js"></script>
    <script src="js/multiplayer.js"></script>
    <script src="js/remote_player.js"></script>
    <script src="js/weapon_viewmodel.js"></script>
    <script src="js/game.js"></script>
    <script src="js/main.js"></script>
</body>

</html>